%h2.title Similarity Scores

.grid-x.grid-padding-x
  .small-12.medium-9.large-6.cell

    :javascript
      $(function(){
        $('#player-select').selectize({
          // theme: 'repositories',
          valueField: 'id',
          labelField: 'name',
          searchField: 'name',
          options: [],
          create: false,
          render: {
            option: function(item, escape) {
              return '<div>' +
                '<span class="title">' +
                  '<span class="name">' + escape(item.name) + '</span>' +
                '</span>' +
                '<span class="description">' + escape(item.active_year_begin) + '</span>' +
                '<ul class="meta">' +
                  '<li>' + escape(item.active_year_end) + '</li>' +
                '</ul>' +
              '</div>';
            }
          },
          score: function(search) {
            var score = this.getScoreFunction(search);
            return function(item) {
                return score(item) * item.hof;
            };
          },

          load: function(query, callback) {
            if (!query.length) return callback();
            $.ajax({
              url: "#{players_path}?q=" + encodeURIComponent(query),
              type: 'GET',
              error: function() {
                callback();
              },
              success: function(res) {
                //console.log(res);
                callback(res)
                // callback(res.repositories.slice(0, 10));
              }
            });
          }
       });
      });


    %form
      %select{id: 'player-select', name: 'q'}

    -# = simple_form_for :player do |f|
    -#   = f.input :name, as: :select,
    -#     collection: @suggestions,
    -#     include_blank: false,
    -#     input_html: { id: 'player-select' }

    -# %ul.similar-career-players
    -#   - @similar_career_players.each do |similar_career_player|
    -#     %li= similar_career_player.related_player.name
